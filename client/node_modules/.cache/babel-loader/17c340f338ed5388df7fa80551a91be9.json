{"ast":null,"code":"import _objectSpread from \"/Users/cbatsoula/_exp_/test-waveson-client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nvar _jsxFileName = \"/Users/cbatsoula/_exp_/test-waveson-client/src/containers/NoteStuff.js\";\nimport React from 'react';\nimport { Link } from 'react-router-dom';\nimport NoteCard from '../components/NoteCard';\nimport PhotoUpload from './PhotoUpload';\nimport { Image, Video, Transformation, CloudinaryContext } from 'cloudinary-react';\nimport cloudinary from 'cloudinary-react';\n\nclass NoteStuff extends React.Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      note: null,\n      allNotes: null,\n      oneNote: null,\n      select: false,\n      tag: null,\n      oneTag: null,\n      allTags: null,\n      photoInfo: null\n    };\n\n    this.handleSubmit = event => {\n      event.preventDefault();\n      let thisOne = this.props.allBeaches.find(beach => {\n        return beach.name === this.props.currentBeach.name;\n      });\n\n      if (this.state.select) {\n        fetch(\"http://localhost:3000/notes/\".concat(this.state.oneNote.id), {\n          method: \"PATCH\",\n          headers: {\n            \"Content-Type\": \"application/json\",\n            \"Access-Control-Allow-Methods\": \"PATCH\",\n            \"Access-Control-Allow-Origin\": \"http://localhost\"\n          },\n          body: JSON.stringify({\n            note: this.state.note,\n            user_id: this.props.currentUser.id,\n            beach_id: thisOne.id\n          })\n        }).then(r => r.json()).then(data => {\n          console.log(\"one review\", this.state.oneReview);\n          console.log(\"data\", data); //update one object in state array\n\n          let updatedReview = this.state.allNotes.map(note => {\n            if (note.id === this.state.oneNote.id) {\n              return this.state.oneNote;\n            } else {\n              return note;\n            }\n          });\n          this.setState({\n            reviews: updatedReview,\n            select: false\n          });\n        });\n      } else {\n        this.postNotes();\n        this.postTags();\n      }\n    };\n\n    this.postTags = () => {\n      let thisOne = this.props.allBeaches.find(beach => {\n        return beach.name === this.props.currentBeach.name;\n      });\n      fetch(\"http://localhost:3000/tags\", {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n          \"Accept\": \"application/json\"\n        },\n        body: JSON.stringify({\n          tag: this.state.tag,\n          user_id: this.props.currentUser.id,\n          beach_id: thisOne.id\n        })\n      }).then(res => res.json()).then(data => {\n        console.log(\"back from post tag\", data);\n        this.setState({\n          tag: \"\",\n          allTags: [...this.state.allTags, data]\n        }, () => {\n          console.log(\"POSTED TAG\", this.state.allTags);\n        });\n      });\n    };\n\n    this.postNotes = () => {\n      let thisOne = this.props.allBeaches.find(beach => {\n        return beach.name === this.props.currentBeach.name;\n      });\n      let thisPhoto = this.state.photoInfo[0].secure_url;\n      fetch(\"http://localhost:3000/notes\", {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n          \"Accept\": \"application/json\"\n        },\n        body: JSON.stringify({\n          note: this.state.note,\n          user_id: this.props.currentUser.id,\n          beach_id: thisOne.id,\n          photo: thisPhoto\n        })\n      }).then(res => res.json()).then(data => {\n        console.log(\"back from post\", data);\n        this.setState({\n          note: \"\",\n          select: false,\n          allNotes: [data, ...this.state.allNotes]\n        }, () => {\n          this.fetchNotes();\n        } // , () => {this.postNoteTag()}\n        );\n        console.log(\"POSTED NOTE\", this.state.allNotes); // this.setState({\n        //   reviews: [...this.state.reviews, data],\n        //   select: false,\n        // })\n      });\n    };\n\n    this.fetchNotes = () => {\n      let thisOne = this.props.allBeaches.find(beach => {\n        return beach.name === this.props.currentBeach.name;\n      });\n      let userID = this.props.currentUser.id;\n      fetch('http://localhost:3000/notes').then(r => r.json()).then(stuff => {\n        let findFromNotes = stuff.filter(note => {\n          return note.beach_id === thisOne.id && note.user_id === userID;\n        }); // console.log(\"pls\", findFromNotes)\n        // debugger;\n\n        this.setState({\n          allNotes: findFromNotes\n        });\n      });\n    };\n\n    this.fetchTags = () => {\n      let thisOne = this.props.allBeaches.find(beach => {\n        return beach.name === this.props.currentBeach.name;\n      });\n      let userID = this.props.currentUser.id;\n      fetch('http://localhost:3000/tags').then(r => r.json()).then(stuff => {\n        let findFromTags = stuff.filter(tag => {\n          return tag.beach_id === thisOne.id && tag.user_id === userID;\n        });\n        this.setState({\n          allTags: findFromTags\n        });\n      });\n    };\n\n    this.handleChange = event => {\n      this.setState({\n        oneNote: _objectSpread({}, this.state.oneNote, {\n          [event.target.name]: event.target.value\n        }),\n        [event.target.name]: event.target.value,\n        oneTag: _objectSpread({}, this.state.oneTag, {\n          [event.target.name]: event.target.value\n        })\n      });\n    };\n\n    this.handleEdit = thing => {\n      console.log(\"one review\", thing, thing.id);\n      this.setState({\n        oneNote: thing,\n        select: true\n      });\n    };\n\n    this.handleDelete = thing => {\n      console.log(\"delete this review\", thing.id);\n      fetch(\"http://localhost:3000/notes/\".concat(thing.id), {\n        method: \"DELETE\"\n      }).then(r => r.json()).then(data => {\n        console.log(\"removed\", data);\n        var newItems = this.state.allNotes.filter(note => {\n          return note.id !== thing.id;\n        });\n        this.setState({\n          allNotes: newItems\n        });\n      });\n    };\n\n    this.renderNoteCards = () => {\n      return this.state.allNotes.map(note => {\n        return React.createElement(NoteCard, {\n          note: note,\n          key: note.id,\n          handleEdit: this.handleEdit,\n          handleDelete: this.handleDelete,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 209\n          },\n          __self: this\n        });\n      });\n    };\n\n    this.setShit = result => {\n      console.log(\"bro what\", result);\n      this.setState({\n        photoInfo: result\n      }, () => {\n        console.log(\"thisPhoto\", thisPhoto);\n      });\n    };\n  }\n\n  componentDidMount() {\n    this.fetchNotes();\n    this.fetchTags();\n  }\n\n  uploadWidget() {\n    window.cloudinary.openUploadWidget({\n      cloud_name: 'dlybpe5za',\n      upload_preset: 'waveson'\n    }, (error, result) => {\n      console.log(result);\n\n      if (result) {\n        this.setShit(result);\n      }\n    });\n  }\n\n  render() {\n    console.log(\"note\", this.state);\n    console.log(\"note props\", this.props);\n    return React.createElement(\"div\", {\n      className: \"Note-Container\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 235\n      },\n      __self: this\n    }, React.createElement(\"h1\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 236\n      },\n      __self: this\n    }, \"Galleria\"), React.createElement(\"div\", {\n      className: \"upload\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 237\n      },\n      __self: this\n    }, React.createElement(\"button\", {\n      onClick: this.uploadWidget.bind(this),\n      className: \"upload-button\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 238\n      },\n      __self: this\n    }, \"Add Image\")), \"PhotoUpload\", React.createElement(Image, {\n      cloudName: \"dlybpe5za\",\n      publicId: \"sample\",\n      width: \"300\",\n      crop: \"scale\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 243\n      },\n      __self: this\n    }), React.createElement(\"form\", {\n      className: \"Note-Form\",\n      onSubmit: this.handleSubmit,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 245\n      },\n      __self: this\n    }, React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 246\n      },\n      __self: this\n    }), React.createElement(\"textarea\", {\n      onChange: this.handleChange,\n      name: \"note\",\n      value: this.state.oneNote ? this.state.oneNote.note : this.state.note,\n      rows: \"4\",\n      cols: \"50\",\n      type: \"text\",\n      placeholder: \"Start your entry here!\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 247\n      },\n      __self: this\n    }), React.createElement(\"textarea\", {\n      onChange: this.handleChange,\n      name: \"tag\",\n      value: this.state.oneTag ? this.state.oneTag.tag : this.state.tag,\n      rows: \"4\",\n      cols: \"50\",\n      type: \"text\",\n      placeholder: \"tags\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 255\n      },\n      __self: this\n    }), React.createElement(\"input\", {\n      type: \"submit\",\n      value: \"Submit\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 263\n      },\n      __self: this\n    })), this.state.allNotes ? this.renderNoteCards() : null);\n  }\n\n}\n\nexport default NoteStuff;","map":{"version":3,"sources":["/Users/cbatsoula/_exp_/test-waveson-client/src/containers/NoteStuff.js"],"names":["React","Link","NoteCard","PhotoUpload","Image","Video","Transformation","CloudinaryContext","cloudinary","NoteStuff","Component","state","note","allNotes","oneNote","select","tag","oneTag","allTags","photoInfo","handleSubmit","event","preventDefault","thisOne","props","allBeaches","find","beach","name","currentBeach","fetch","id","method","headers","body","JSON","stringify","user_id","currentUser","beach_id","then","r","json","data","console","log","oneReview","updatedReview","map","setState","reviews","postNotes","postTags","res","thisPhoto","secure_url","photo","fetchNotes","userID","stuff","findFromNotes","filter","fetchTags","findFromTags","handleChange","target","value","handleEdit","thing","handleDelete","newItems","renderNoteCards","setShit","result","componentDidMount","uploadWidget","window","openUploadWidget","cloud_name","upload_preset","error","render","bind"],"mappings":"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","sourcesContent":["import React from 'react';\nimport { Link } from 'react-router-dom';\nimport NoteCard from '../components/NoteCard';\nimport PhotoUpload from './PhotoUpload';\nimport {Image, Video, Transformation, CloudinaryContext} from 'cloudinary-react';\nimport cloudinary from 'cloudinary-react';\n\n\nclass NoteStuff extends React.Component {\n\n  state = {\n    note: null,\n    allNotes: null,\n    oneNote: null,\n    select: false,\n    tag: null,\n    oneTag: null,\n    allTags: null,\n    photoInfo: null,\n  }\n\n\n  handleSubmit = event => {\n  event.preventDefault();\n\n\n  let thisOne = this.props.allBeaches.find(beach => {\n    return beach.name === this.props.currentBeach.name\n  })\n\n  if (this.state.select){\n    fetch(`http://localhost:3000/notes/${this.state.oneNote.id}`, {\n      method: \"PATCH\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        \"Access-Control-Allow-Methods\": \"PATCH\",\n        \"Access-Control-Allow-Origin\": \"http://localhost\"\n      },\n      body: JSON.stringify({\n        note: this.state.note,\n        user_id: this.props.currentUser.id,\n        beach_id: thisOne.id,\n       })\n    })\n      .then(r => r.json())\n      .then(data => {\n        console.log(\"one review\", this.state.oneReview)\n        console.log(\"data\", data)\n        //update one object in state array\n        let updatedReview = this.state.allNotes.map(note => {\n          if (note.id === this.state.oneNote.id){\n            return this.state.oneNote\n          } else {\n            return note\n          }\n        })\n        this.setState({\n          reviews: updatedReview,\n          select: false,\n        })\n      })\n\n  } else {\n    this.postNotes()\n    this.postTags()\n    }\n  };\n\n  postTags = () => {\n    let thisOne = this.props.allBeaches.find(beach => {\n      return beach.name === this.props.currentBeach.name\n    })\n    fetch(`http://localhost:3000/tags`, {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        \"Accept\": \"application/json\"\n      },\n      body: JSON.stringify({\n        tag: this.state.tag,\n        user_id: this.props.currentUser.id,\n        beach_id: thisOne.id,\n      })\n    })\n      .then( res => res.json())\n      .then( data => {\n        console.log(\"back from post tag\", data)\n        this.setState({\n          tag: \"\",\n          allTags: [...this.state.allTags, data]\n        }, () => {console.log(\"POSTED TAG\", this.state.allTags)})\n      })\n  }\n\n  postNotes = () => {\n    let thisOne = this.props.allBeaches.find(beach => {\n      return beach.name === this.props.currentBeach.name\n    })\n    let thisPhoto = this.state.photoInfo[0].secure_url\n    fetch(\"http://localhost:3000/notes\", {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        \"Accept\": \"application/json\"\n      },\n      body: JSON.stringify({\n        note: this.state.note,\n        user_id: this.props.currentUser.id,\n        beach_id: thisOne.id,\n        photo: thisPhoto,\n      })\n    })\n      .then(res => res.json())\n      .then(data => {\n        console.log(\"back from post\", data)\n        this.setState({\n          note: \"\",\n          select: false,\n          allNotes: [data, ...this.state.allNotes]\n        }, () => {this.fetchNotes()}\n        // , () => {this.postNoteTag()}\n       )\n        console.log(\"POSTED NOTE\", this.state.allNotes)\n\n        // this.setState({\n        //   reviews: [...this.state.reviews, data],\n        //   select: false,\n        // })\n      });\n  }\n\n\n\n  componentDidMount() {\n    this.fetchNotes()\n    this.fetchTags()\n  }\n\n  fetchNotes = () => {\n    let thisOne = this.props.allBeaches.find(beach => {\n      return beach.name === this.props.currentBeach.name\n    })\n    let userID = this.props.currentUser.id\n    fetch('http://localhost:3000/notes')\n      .then( r => r.json())\n      .then( stuff => {\n        let findFromNotes = stuff.filter( note => {\n          return note.beach_id === thisOne.id && note.user_id === userID})\n        // console.log(\"pls\", findFromNotes)\n        // debugger;\n\n        this.setState({\n          allNotes: findFromNotes\n        })\n\n      })\n  }\n  fetchTags = () => {\n    let thisOne = this.props.allBeaches.find(beach => {\n      return beach.name === this.props.currentBeach.name\n    })\n    let userID = this.props.currentUser.id\n    fetch('http://localhost:3000/tags')\n      .then( r => r.json())\n      .then( stuff => {\n        let findFromTags = stuff.filter( tag => {\n          return tag.beach_id === thisOne.id && tag.user_id === userID})\n\n        this.setState({\n          allTags: findFromTags\n        })\n\n      })\n  }\n\n  handleChange = (event) => {\n    this.setState({\n      oneNote: {...this.state.oneNote, [event.target.name]: event.target.value},\n      [event.target.name]: event.target.value,\n      oneTag: {...this.state.oneTag, [event.target.name]: event.target.value},\n    });\n  };\n\n  handleEdit = (thing) => {\n  console.log(\"one review\", thing, thing.id)\n    this.setState({\n      oneNote: thing,\n      select: true\n    });\n\n  }\n\n  handleDelete = (thing) => {\n  console.log(\"delete this review\", thing.id)\n   fetch(`http://localhost:3000/notes/${thing.id}`, {\n     method: \"DELETE\",\n   })\n     .then( r => r.json())\n     .then( data => {\n       console.log(\"removed\", data)\n       var newItems = this.state.allNotes.filter((note) => {\n         return note.id !== thing.id});\n     this.setState({ allNotes: newItems });\n     })\n  }\n\n  renderNoteCards = () => {\n    return this.state.allNotes.map( note => {\n      return <NoteCard note={note} key={note.id} handleEdit={this.handleEdit} handleDelete={this.handleDelete} />\n    })\n  }\n\n  setShit = (result) => {\n    console.log(\"bro what\", result)\n    this.setState({\n      photoInfo: result\n    }, () => {console.log(\"thisPhoto\", thisPhoto)})\n  }\n\n  uploadWidget() {\n    window.cloudinary.openUploadWidget({ cloud_name: 'dlybpe5za', upload_preset: 'waveson'},\n        (error, result) => {\n            console.log(result);\n            if (result) {\n              this.setShit(result)\n            }\n\n        });\n      }\n\n  render () {\n    console.log(\"note\", this.state)\n    console.log(\"note props\", this.props)\n    return (\n      <div className=\"Note-Container\">\n      <h1>Galleria</h1>\n            <div className=\"upload\">\n                <button onClick={this.uploadWidget.bind(this)} className=\"upload-button\">\n                    Add Image\n                </button>\n            </div>\n        PhotoUpload\n        <Image cloudName=\"dlybpe5za\" publicId=\"sample\" width=\"300\" crop=\"scale\" />\n\n        <form className=\"Note-Form\" onSubmit={this.handleSubmit}>\n          <br />\n          <textarea\n          onChange={this.handleChange}\n          name=\"note\"\n          value={this.state.oneNote ? this.state.oneNote.note : this.state.note}\n          rows=\"4\"\n          cols=\"50\"\n          type=\"text\"\n          placeholder=\"Start your entry here!\"/>\n          <textarea\n          onChange={this.handleChange}\n          name=\"tag\"\n          value={this.state.oneTag ? this.state.oneTag.tag : this.state.tag}\n          rows=\"4\"\n          cols=\"50\"\n          type=\"text\"\n          placeholder=\"tags\"/>\n          <input type=\"submit\" value=\"Submit\" />\n        </form>\n      {\n        this.state.allNotes\n        ?\n        this.renderNoteCards()\n        :\n        null\n      }\n\n      </div>\n    )\n  }\n}\nexport default NoteStuff\n"]},"metadata":{},"sourceType":"module"}